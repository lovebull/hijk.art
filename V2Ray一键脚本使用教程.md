
<blockquote>

<p>使用过程中遇到问题，请先仔细参考
 <a href="https://v2raytech.com/vpn-faq/" target="_blank" rel="noopener noreferrer">科学上网常见问题</a>。
 如果不能解决问题，<span class="recipients-summary-label" title="<hijk.pw@protonmail.ch>">欢迎到 <a href="https://hijk.club" target="_blank" rel="noopener noreferrer">网络跳越论坛</a> 或 TG群组 <a href="https://t.me/hijkclub" target="_blank" rel="noopener nofollow">https://t.me/hijkclub</a> 交流或关注Youtube频道：<a href="https://youtube.com/channel/UCYTB--VsObzepVJtc9yvUxQ" target="_blank" rel="noopener">网络跳越</a></span><a class="row-title" href="https://v2raytech.com/v2ray-all-in-one-script-vless-tcp-xtls-support/" aria-label="“V2ray多合一脚本，支持VMESS+websocket+TLS+Nginx、VLESS+TCP+XTLS、VLESS+TCP+TLS等组合”（编辑）" target="_blank" rel="noopener"></a></p></blockquote>
 
 <p>今天做了<strong>CentOS 7/8、Ubuntu、Debian及衍生</strong>系统的v2ray的一键安装脚本，支持VLESS和最新的XTLS，目前已经上传到 <a href="https://github.com/hijkpw/scripts" target="_blank" rel="noopener nofollow">Github</a>。</p>
 
 <blockquote>
<p><strong>2020.12.10更新</strong>：最新版V2ray-core已经移除了XTLS，如果你要使用XTLS技术，推荐 <a href="https://v2raytech.com/xray-one-click-script/" target="_blank" rel="noopener">Xray一键脚本</a></p>

</blockquote>

<h2>V2ray一键脚本使用教程</h2><p>1. 准备一个境外服务器，想服务器速度快请参考 <a href="https://v2raytech.com/bandwagonghost-buy-vps-tutorial/" target="_blank" rel="noopener">搬瓦工VPS购买教程</a> 或从&nbsp; <a href="https://v2raytech.com/cn2-gia-merchants/" target="_blank" rel="noopener nofollow">CN2 GIA VPS商家推荐</a> 选购，想ip被封后免费换请参考：<a class="wpp-post-title" href="https://v2raytech.com/vultr-buy-vps-tutorial/" target="_blank" rel="noopener">购买vultr服务器超详细图文教程</a>。</p><p>如果用VMESS+WS+TLS或者VLESS系列协议，则还需一个域名。对域名没有要求，国内/国外注册的都可以，<strong>不需要备案</strong>，不会影响使用，也不会带来安全/隐私上的问题。购买域名可参考：<a href="https://v2raytech.com/namesilo-buy-domain-tutorial/" target="_blank" rel="noopener noreferrer">Namesilo购买域名详细教程</a>。</p><p>值得一提的是本V2ray一键脚本支持ipv6 only服务器，但是不建议用只有ipv6的VPS用来科学上网。</p><p>2. 如果vps运营商开启了防火墙（阿里云、Ucloud、腾讯云、AWS、GCP等商家默认有，搬瓦工/hostdare/vultr等商家默认关闭），请先登录vps管理后台放行80和443端口，否则可能会导致获取证书失败。此外，<strong>本脚本支持上传自定义证书</strong>，可跳过申请证书这一步，也可用在<a href="https://v2raytech.com/tag/nat-vps/" target="_blank" rel="noopener">NAT VPS</a>上。</p><p>3. ssh连接到服务器。Windows系统请参考 <a href="https://v2raytech.com/bitvise-connect-linux-server-tutorial/" target="_blank" rel="noopener noreferrer">Bitvise连接Linux服务器教程</a>，mac用户请参考 <a href="https://v2raytech.com/mac-connect-to-linux-tutorial/" target="_blank" rel="noopener">Mac电脑连接Linux教程</a>。</p><p>4. 复制（或手动输入）下面命令到终端</p><pre class=" prettyprinted"><code class=" prettyprinted"><span class="pln">bash </span><span class="pun">&lt;(</span><span class="pln">curl </span><span class="pun">-</span><span class="pln">sL https</span><span class="pun">:</span><span class="com">//s.hijk.art/v2ray.sh)</span></code></pre><p>按回车键，将出现如下操作菜单。如果菜单没出现，CentOS系统请输入 <code class=" prettyprinted" style=""><span class="pln">yum install </span><span class="pun">-</span><span class="pln">y curl</span></code>，Ubuntu/Debian系统请输入 <code class=" prettyprinted" style=""><span class="pln">sudo apt install </span><span class="pun">-</span><span class="pln">y curl</span></code>，然后再次运行上面的命令：</p>

![](./V2Ray一键脚本使用教程/V2ray一键脚本安装菜单.jpg) 

<div id="attachment_2426" class="wp-caption aligncenter"><div id="attachment_2440" style="width: 1001px" class="wp-caption aligncenter">

<p id="caption-attachment-2440" class="wp-caption-text">V2ray一键脚本安装菜单</p></div></div><p>目前V2ray一键脚本支持以下功能：</p><ul><li><strong>VMESS</strong>，即最普通的V2ray服务器，没有伪装，也不是VLESS</li><li><strong>VMESS</strong>+KCP，传输协议使用mKCP，VPS线路不好时可能有奇效</li><li><strong>VMESS</strong>+TCP+TLS，带伪装的V2ray，不能过<a href="https://v2raytech.com/use-cloudflare-unlock-blocked-ip/" target="_blank" rel="noopener">CDN中转</a></li><li><strong>VMESS</strong>+WS+TLS，即最通用的V2ray伪装方式，能过<a href="https://v2raytech.com/use-cloudflare-unlock-blocked-ip/" target="_blank" rel="noopener">CDN中转</a>，推荐使用</li><li><strong>VLESS</strong>+KCP，传输协议使用mKCP</li><li><strong>VLESS</strong>+TCP+TLS，通用的VLESS版本，不能过<a href="https://v2raytech.com/use-cloudflare-unlock-blocked-ip/" target="_blank" rel="noopener">CDN中转</a>，但比VMESS+TCP+TLS方式性能更好</li><li><strong>VLESS</strong>+WS+TLS，基于websocket的V2ray伪装VLESS版本，能过<a href="https://v2raytech.com/use-cloudflare-unlock-blocked-ip/" target="_blank" rel="noopener">CDN中转</a>，有过CDN情况下推荐使用</li><li><strong>VLESS</strong>+TCP+XTLS，目前最强悍的VLESS+XTLS组合，强力推荐使用（但是支持的客户端少一些）</li><li><strong>trojan</strong>，轻量级的伪装协议</li><li><strong>trojan</strong>+XTLS，trojan加强版，使用XTLS技术来提升性能</li></ul><blockquote><p>注意：目前一些客户端不支持VLESS协议，或者不支持XTLS，请按照自己的情况选择组合</p></blockquote><p>5. 按照自己的需求选择一个方式安装，例如6，然后回车。接着脚本会自动运行，期间会让你输入一些信息，请按照提示输入：</p>

![](./V2Ray一键脚本使用教程/VLESSTCPXTLS一键脚本输入信息.webp)


<p id="caption-attachment-2441" class="wp-caption-text">VLESS+TCP+XTLS一键脚本输入信息</p><p>6. 脚本接下来会自动运行，一切顺利的话结束后会输出配置信息：</p>


![](./V2Ray一键脚本使用教程/VLESSTCPXTLS一键脚本输出信息.jpg)
<div id="attachment_2442" style="width: 927px" class="wp-caption aligncenter"><p id="caption-attachment-2442" class="wp-caption-text">VLESS+TCP+XTLS一键脚本输出信息</p></div><p><strong>到此服务端配置完毕</strong>，服务器可能会自动重启（<strong>没提示重启则不需要</strong>），windows终端出现“disconnected”，mac出现“closed by remote host”说明服务器成功重启了。</p><p>对于VLESS协议、VMESS+WS+TLS的组合，网页上输入伪装域名，<strong>能正常打开伪装站</strong>，说明服务端已经正确配置好。如果运行过程中出现问题，请在本页面下方查找解决方法或留言。</p><h2>V2ray一键脚本其他事项</h2><p>服务端配置好后，如果想使用CloudFlare等CDN中转（必须是WS版才可以），请参考：<a class="row-title" href="https://v2raytech.com/use-cloudflare-unlock-blocked-ip/" target="_blank" rel="noopener" aria-label="v2ray使用cloudflare中转流量，拯救被墙ip">使用cloudflare中转流量，拯救被墙ip</a>；<strong></strong></p><p>本脚本默认使用的加速技术是BBR，换成魔改BBR/BBR Plus/锐速清参考：<a class="row-title" href="https://v2raytech.com/install-bbr-plus-lotserver/" aria-label="安装魔改BBR/BBR Plus/锐速(Lotserver)" target="_blank" rel="noopener">安装魔改BBR/BBR</a><a class="row-title" href="https://v2raytech.com/install-bbr-plus-lotserver/" aria-label="安装魔改BBR/BBR Plus/锐速(Lotserver)" target="_blank" rel="noopener"> Plus/锐速(</a><a class="row-title" href="https://v2raytech.com/install-bbr-plus-lotserver/" aria-label="安装魔改BBR/BBR Plus/锐速(Lotserver)" target="_blank" rel="noopener">Lotserver)</a>。<strong></strong></p><p>如果伪装站类型没有你满意的，比如你想搭建WordPress博客，请参考：<a href="https://v2raytech.com/v2ray-mask-with-website/" target="_blank" rel="noopener">V2ray伪装建站教程</a>。</p><p>对于使用TLS的方式，脚本默认会申请域名证书，证书存放在和V2ray配置文件同一个文件夹内（即<code class=" prettyprinted" style=""><span class="str">/etc/</span><span class="pln">v2ray</span></code>目录下）。证书会自动更新，如果客户端突然无法使用，请打开伪装网站查看是否能正常打开。如果证书已过期，请再次运行上面的脚本重新配置。</p><p>最后，刚搭建好V2ray后不要猛上流量，否则会导致被限速、端口被墙，严重可能导致ip被墙。</p><p>PS：一些常见问题可以参考：<a href="https://v2raytech.com/one-click-problems/" target="_blank" rel="noopener">一键脚本上遇到的问题</a></p><h2>客户端下载</h2><p>接下来是<strong>科学上网最后一步</strong>：下载客户端，并参考页面中的配置教程进行配置：</p><p><span style="font-size: 24pt;"><a href="https://v2raytech.com/v2ray-windows-client-download/" target="_blank" rel="bookmark noopener noreferrer">v2ray windows客户端下载</a></span></p><p><span style="font-size: 24pt;"><a href="https://v2raytech.com/v2ray-android-client-download/" target="_blank" rel="bookmark noopener noreferrer">v2ray安卓客户端下载</a></span></p><p><span style="font-size: 24pt;"><a href="https://v2raytech.com/v2ray-mac-client-download/" target="_blank" rel="bookmark noopener noreferrer">v2ray mac客户端下载</a></span></p><p><span style="font-size: 24pt;"><a href="https://v2raytech.com/v2ray-ios-client-download/" target="_blank" rel="bookmark noopener noreferrer">v2ray ios客户端下载</a></span></p><p>下载客户端配置好后，就可以愉快的上外网了！</p><h2>参考</h2><p>1. <a href="https://tlanyan.me/v2ray-tutorial/" target="_blank" rel="noopener">v2ray教程</a></p><p>2. <a href="https://tlanyan.me/introduce-v2ray-vless-protocol/" target="_blank" rel="noopener">VLESS协议介绍及使用教程</a></p></div>